<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Clientes WhatsApp</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #0b0b0b;
    color: #fff;
}
header {
    background: #111;
    padding: 15px;
    text-align: center;
}
header h1 {
    margin: 0;
    font-size: 20px;
}
header span {
    font-size: 14px;
    opacity: 0.8;
}
.container {
    padding: 15px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 15px;
}
.card {
    background: #1a1a1a;
    border: 1px solid #2a2a2a;
    border-radius: 10px;
    padding: 15px;
    cursor: pointer;
    transition: 0.2s;
}
.card:hover {
    background: #00ff88;
    color: #000;
}
.nome {
    font-weight: bold;
    margin-bottom: 6px;
}
.numero {
    font-size: 14px;
}
.promotor {
    font-size: 13px;
    opacity: 0.8;
}
</style>
</head>

<body>

<header>
    <h1>ðŸ“± Clientes WhatsApp</h1>
    <span id="total">Carregando...</span>
</header>

<div class="container" id="lista"></div>

<script>
const CSV_URL = "https://raw.githubusercontent.com/feiteciravip/brazzclientes/main/clientes.csv";

fetch(CSV_URL)
.then(res => res.text())
.then(texto => {
    texto = texto.replace(/\uFEFF/g, "");
    const linhas = texto.split(/\r?\n/);

    const lista = document.getElementById("lista");
    const totalSpan = document.getElementById("total");

    let total = 0;

    for (let i = 1; i < linhas.length; i++) {
        if (!linhas[i].trim()) continue;

        const colunas = linhas[i].split("\t");

        if (colunas.length < 7) continue;

        const apelido = colunas[3].trim();
        const whatsapp = colunas[5].trim();
        const promotor = colunas[6].trim();

        if (!apelido || !whatsapp) continue;

        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <div class="nome">${apelido}</div>
            <div class="numero">ðŸ“ž ${whatsapp}</div>
            <div class="promotor">${promotor}</div>
        `;

        card.onclick = () => {
            window.open("https://wa.me/55" + whatsapp, "_blank");
        };

        lista.appendChild(card);
        total++;
    }

    totalSpan.textContent = "Total de Clientes: " + total;
})
.catch(err => {
    document.getElementById("total").textContent = "Erro ao carregar CSV";
    console.error(err);
});
</script>

</body>
</html>
